package appu26j.mods.visuals;

import appu26j.interfaces.ModInterface;
import appu26j.mods.Category;
import appu26j.mods.Mod;
import appu26j.settings.Setting;
import club.sk1er.motionblur.MotionBlurResourceManager;
import net.minecraft.util.ResourceLocation;

@ModInterface(name = "Motion Blur", description = "Creates a blur effect when in motion to make things smoother.", category = Category.VISUALS)
public class MotionBlur extends Mod
{
    private MotionBlurResourceManager motionBlurResourceManager;
    
    public MotionBlur()
    {
        this.addSetting(new Setting("Intensity", this, 1, 2, 7, 1));
    }
    
    @Override
    public void onEnable()
    {
        super.onEnable();
        this.motionBlurResourceManager = new MotionBlurResourceManager(this.mc.metadataSerializer);
        this.mc.entityRenderer.loadShader(new ResourceLocation("motionblur", "motionblur"));
        this.mc.entityRenderer.getShaderGroup().createBindFramebuffers(this.mc.displayWidth, this.mc.displayHeight);
    }
    
    @Override
    public void onDisable()
    {
        super.onDisable();
        this.mc.entityRenderer.stopUseShader();
    }
}
